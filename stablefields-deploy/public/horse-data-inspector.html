<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horse Data Inspector</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        .container { max-width: 1200px; margin: 0 auto; }
        pre { background: #333; padding: 20px; border-radius: 8px; overflow-x: auto; }
        .horse-card { background: #262626; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .section { margin: 20px 0; }
        button { padding: 10px 20px; background: #00d4aa; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #00b894; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üêé Horse Data Inspector</h1>
        
        <div class="section">
            <button onclick="loadHorseData()">Load Current Horse Data</button>
            <button onclick="clearDisplay()">Clear Display</button>
        </div>
        
        <div id="summary"></div>
        <div id="horse-list"></div>
        <div id="sample-data"></div>
    </div>

    <script>
        function loadHorseData() {
            const horses = JSON.parse(localStorage.getItem('horses') || '[]');
            const summaryDiv = document.getElementById('summary');
            const horseListDiv = document.getElementById('horse-list');
            const sampleDataDiv = document.getElementById('sample-data');
            
            // Summary
            summaryDiv.innerHTML = `
                <h2>üìä Summary</h2>
                <p><strong>Total Horses:</strong> ${horses.length}</p>
                <p><strong>Storage Key:</strong> horses</p>
            `;
            
            // Horse list with key details
            horseListDiv.innerHTML = `
                <h2>üêé Horses List</h2>
                ${horses.map((horse, index) => `
                    <div class="horse-card">
                        <h3>${horse.name || 'Unknown'} (ID: ${horse.id})</h3>
                        <p><strong>Bloodline:</strong> ${horse.bloodline} | <strong>Gen:</strong> ${horse.generation} | <strong>Gender:</strong> ${horse.gender}</p>
                        <p><strong>Races:</strong> ${horse.total_races || 'N/A'} | <strong>Win Rate:</strong> ${horse.win_percentage || 'N/A'}%</p>
                        <p><strong>Has Race Data:</strong> ${horse.races ? `Yes (${horse.races.length} races)` : 'No'}</p>
                        <p><strong>Has Augment Data:</strong> ${horse.augment_combinations ? `Yes (${horse.augment_combinations.length} combinations)` : 'No'}</p>
                        <button onclick="showHorseDetails(${index})">Show Full Data</button>
                    </div>
                `).join('')}
            `;
            
            // Sample data structure for first horse
            if (horses.length > 0) {
                sampleDataDiv.innerHTML = `
                    <h2>üîç Sample Horse Data Structure</h2>
                    <pre>${JSON.stringify(horses[0], null, 2)}</pre>
                `;
            }
        }
        
        function showHorseDetails(index) {
            const horses = JSON.parse(localStorage.getItem('horses') || '[]');
            const horse = horses[index];
            
            const newWindow = window.open('', '_blank', 'width=800,height=600');
            newWindow.document.write(`
                <html>
                <head><title>Horse Details: ${horse.name}</title>
                <style>body{font-family:Arial;padding:20px;background:#1a1a1a;color:#fff;}pre{background:#333;padding:20px;border-radius:8px;overflow-x:auto;}</style>
                </head>
                <body>
                <h1>üêé ${horse.name} - Full Data</h1>
                <pre>${JSON.stringify(horse, null, 2)}</pre>
                </body>
                </html>
            `);
        }
        
        function clearDisplay() {
            document.getElementById('summary').innerHTML = '';
            document.getElementById('horse-list').innerHTML = '';
            document.getElementById('sample-data').innerHTML = '';
        }
        
        // Auto-load on page load
        window.onload = loadHorseData;
    </script>
</body>
</html>
